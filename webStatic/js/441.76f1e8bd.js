"use strict";(self["webpackChunkseeingflow_webapp"]=self["webpackChunkseeingflow_webapp"]||[]).push([[441],{7162:function(e,t,a){a.d(t,{Z:function(){return o}});var l=a(7099);const i="casebook";class o{static async page(e,t){const a=await l.Z.get(`/${i}/page`,{params:{current:e,size:t}});if(200===a.code)return a.data;throw a}static async detail(e){const t=await l.Z.get(`/${i}/detail`,{params:{id:e}});if(200===t.code)return t.data;throw t}static async update(e){const t=await l.Z.post(`/${i}/update`,{...e});if(200===t.code)return t.data;throw t}static async create(e){const t=await l.Z.post(`/${i}/create`,{...e});if(200===t.code)return t.data;throw t}static async delete(e){const t=await l.Z["delete"](`/${i}/delete`,{params:{id:e}});if(200===t.code)return t.data;throw t}}},9810:function(e,t,a){a.d(t,{Z:function(){return o}});var l=a(7099);const i="model";class o{static async page(e,t){const a=await l.Z.get(`/${i}/page`,{params:{current:e,size:t}});if(200===a.code)return a.data;throw a}static async getAll(){let e=1;const t=[];do{const a=await this.page(e,100);if(t.push(...a.list),a.list.length<100)break}while(e++);return t}static async detail(e){const t=await l.Z.get(`/${i}/detail`,{params:{id:e}});if(200===t.code)return t.data;throw t}static async update(e){const t=await l.Z.post(`/${i}/update`,{...e});if(200===t.code)return t.data;throw t}static async create(e){const t=await l.Z.post(`/${i}/create`,{...e});if(200===t.code)return t.data;throw t}static async delete(e){const t=await l.Z["delete"](`/${i}/delete`,{params:{id:e}});if(200===t.code)return t.data;throw t}}},8518:function(e,t,a){a.d(t,{x:function(){return n}});var l=a(9003),i=a(6624),o=a(4419),r=a(678);function n(){const e=(0,r.yj)(),t=(0,l.iH)(e.params.model);(0,l.YP)((()=>e.params.model),(()=>{t.value=e.params.model}));const a=(0,l.Fl)((()=>{switch(t.value){case"Add":return"添加";case"Edit":return"编辑";default:case"View":return"详情"}}));return{pageModel:t,pageModelName:a}}t["Z"]=(0,l.aZ)({name:"CUComponent",props:{showModalTips:{type:Boolean,required:!0}},setup(e,{slots:t}){const{showModalTips:a}=(0,o.BK)(e),d=(0,r.tv)(),s=(0,r.yj)(),u=()=>{c().then((e=>{if(e)if(history.state.back)d.go(-1);else{const e=s.name.replace(/Detail*/,"");d.push({name:e})}}))},p=()=>{d.push({name:s.name,params:{id:s.params.id,model:"Edit"}})},c=async()=>{if(!a.value)return!0;try{return await new Promise(((e,t)=>{i.Z.warning({title:"提示",content:"信息未保存，确定退出编辑？",closable:!0,cancelText:"取消",hideCancel:!1,onOk:()=>{e(!0)},onCancel:()=>{t(!1)}})})),!0}catch(e){return!1}},{pageModel:m,pageModelName:f}=n(),b=()=>(0,l.Wm)(l.HY,null,[(0,l.Wm)((0,l.up)("a-button"),{shape:"circle",type:"text",onClick:()=>u()},{default:()=>[(0,l.Wm)((0,l.up)("icon-left"),null,null)]}),(0,l.Wm)("span",null,[(0,l.Uk)(" "),f.value,(0,l.Uk)(" ")])]),y=()=>"View"===m.value?(0,l.Wm)((0,l.up)("a-space"),null,{default:()=>[t.extra?t.extra():(0,l.Wm)((0,l.up)("a-button"),{type:"primary",onClick:()=>p()},{default:()=>[(0,l.Wm)((0,l.up)("icon-edit"),null,null),(0,l.Uk)(" 编辑")]})]}):(0,l.Wm)((0,l.up)("a-space"),null,{default:()=>[t.extra?.(),(0,l.Wm)("div",null,null)]});return()=>(0,l.Wm)((0,l.up)("a-card"),null,{default:()=>[t.default?.({pageModel:m,pageModelName:f})],title:b,extra:y})}})},9262:function(e,t,a){var l=a(9003);t["Z"]=(0,l.aZ)({name:"sf-form",props:{model:{type:Object},layout:{type:String},size:{type:String},labelColProps:{type:Object},wrapperColProps:{type:Object},labelAlign:{type:String},disabled:{type:Boolean},rules:{type:Object},autoLabelWidth:{type:Boolean},formModel:{type:String,default:()=>"Edit"},labelWidth:{type:Number,default:()=>90},formMaxWidth:{type:[Number,Boolean],default:()=>1500}},setup(e,{slots:t}){(0,l.JJ)("formModel",e.formModel),(0,l.JJ)("labelWidth",e.labelWidth),(0,l.JJ)("disabled",e.disabled);const a=(0,l.iH)();return{validate(e){return a.value.validate(e)},render:()=>(0,l.Wm)((0,l.up)("a-form"),(0,l.dG)({ref:a},e,{style:e.formMaxWidth>1?`max-width:${e.formMaxWidth}px`:""}),{default:()=>[(0,l.Wm)((0,l.up)("a-row"),{gutter:8},{default:()=>[t.default?.()]})]})}},render(){return this.render()}})},8468:function(e,t,a){var l=a(9003),i=a(678);t["Z"]=(0,l.aZ)({name:"sf-form-item",props:{field:{type:String},label:{type:String},showColon:{type:Boolean},noStyle:{type:Boolean},disabled:{type:Boolean},help:{type:String},extra:{type:String},required:{type:Boolean},rules:{type:Object},validateStatus:{type:String},validateTrigger:{type:String},labelColProps:{type:Object},wrapperColProps:{type:Object},hideLabel:{type:Boolean},hideAsterisk:{type:Boolean},labelColStyle:{type:Object},wrapperColStyle:{type:Object},rowProps:{type:Object},rowClass:{type:Object},contentClass:{type:Object},contentFlex:{type:Boolean},mergeProps:{type:Boolean},labelColFlex:{type:[Number,String]},feedback:{type:Boolean},labelComponent:{type:String},labelAttrs:{type:Object},colProps:{type:Object,default:()=>({xs:24,sm:24,md:12,lg:12,xl:8})}},setup(e,{slots:t}){const a=(0,l.f3)("labelWidth"),o=(0,l.f3)("disabled"),r=(0,l.f3)("formModel"),n=e.labelColFlex||a+"px",d=(0,i.yj)();return()=>(0,l.Wm)((0,l.up)("a-col"),e.colProps,{default:()=>[(0,l.Wm)((0,l.up)("a-form-item"),(0,l.dG)({id:String(d.name)+"-"+e.field},e,{disabled:o||e.disabled,labelColFlex:n}),{default:()=>["View"===r&&t.view?.()||t.default?.()]})]})}})},4880:function(e,t,a){a.d(t,{Z:function(){return s}});var l=a(9003),i=a(678);function o(e){return"function"===typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,l.lA)(e)}var r=(0,l.aZ)({name:"BreadcrumbComponent",props:{items:{type:Array,default:()=>[]}},setup(e){(0,i.tv)();const{items:t}=(0,l.BK)(e);return()=>(0,l.Wm)((0,l.up)("a-breadcrumb"),{class:"container-breadcrumb"},{default:()=>[(0,l.Wm)((0,l.up)("a-breadcrumb-item"),null,{default:()=>[(0,l.Wm)((0,l.up)("icon-apps"),null,null)]}),t.value.map(((e,t)=>"string"==typeof e?(0,l.Wm)((0,l.up)("a-breadcrumb-item"),{key:t},o(e)?e:{default:()=>[e]}):(0,l.Wm)((0,l.up)("a-breadcrumb-item"),{key:t,onClick:()=>e.router(),class:"breadcrumb-clickable"},{default:()=>[e.name]})))]})}}),n=a(89);const d=(0,n.Z)(r,[["__scopeId","data-v-0dac1d28"]]);var s=d},7441:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var l=a(9003);const i=e=>((0,l.dD)("data-v-b81ae1cc"),e=e(),(0,l.Cn)(),e),o={class:"user-detail container"},r=(0,l.Uk)("患者信息"),n=(0,l.Uk)("就诊信息"),d=i((()=>(0,l._)("div",{style:{width:"100%"}},null,-1))),s=i((()=>(0,l._)("div",{style:{width:"100%"}},null,-1))),u=(0,l.Uk)("医生诊断"),p=(0,l.Uk)("保存");function c(e,t,a,i,c,m){const f=(0,l.up)("Breadcrumb"),b=(0,l.up)("a-divider"),y=(0,l.up)("SfFormItem"),w=(0,l.up)("a-image"),g=(0,l.up)("a-textarea"),h=(0,l.up)("a-button"),v=(0,l.up)("SfForm"),W=(0,l.up)("CUVue"),k=(0,l.up)("a-spin");return(0,l.wg)(),(0,l.iD)("div",o,[(0,l.Wm)(f,{items:["病例管理","详情"]}),(0,l.Wm)(k,{loading:e.loading,style:{width:"100%"}},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{showModalTips:!1},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{ref:"refForm",model:e.formData,formModel:"View","label-width":100},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{orientation:"left",style:{width:"100%"}},{default:(0,l.w5)((()=>[r])),_:1}),(0,l.Wm)(y,{label:"患者姓名",field:"patient.id"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.formData.patient?.patientName),1)])),_:1}),(0,l.Wm)(y,{label:"性别",field:"patient.patientGender"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(1===e.formData.patient?.patientGender?"男":"女"),1)])),_:1}),(0,l.Wm)(y,{label:"患者年龄",field:"patient.patientAge"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.formData.patient?.patientAge),1)])),_:1}),(0,l.Wm)(y,{label:"患者联系方式",field:"patient.phoneNumber"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.formData.patient?.phoneNumber),1)])),_:1}),(0,l.Wm)(y,{label:"患者既往史",field:"patient.pastHistory"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.formData.patient?.pastHistory),1)])),_:1}),(0,l.Wm)(b,{orientation:"left",style:{width:"100%"}},{default:(0,l.w5)((()=>[n])),_:1}),(0,l.Wm)(y,{field:"patientDescription",label:"患者描述"},{default:(0,l.w5)((()=>[(0,l.Uk)((0,l.zw)(e.formData.patientDescription),1)])),_:1}),d,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.formData.images,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:t},[(0,l.Wm)(y,{field:"imagesForm."+t+".image",label:1===e.imageProperties?"左眼图片":"右眼图片"},{default:(0,l.w5)((()=>[(0,l.Wm)(w,{src:"/diagnosis"+e.imageAddress,height:100},null,8,["src"])])),_:2},1032,["field","label"]),(0,l.Wm)(y,{field:"imagesForm."+t+".image",label:"结果图"},null,8,["field"]),s],64)))),128)),(0,l.Wm)(b,{orientation:"left",style:{width:"100%"}},{default:(0,l.w5)((()=>[u])),_:1}),(0,l.Wm)(y,{field:"doctorAdvice",label:"诊断内容"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{modelValue:e.formData.doctorAdvice,"onUpdate:modelValue":t[0]||(t[0]=t=>e.formData.doctorAdvice=t),placeholder:"请输入诊断内容","max-length":200,"show-word-limit":"","auto-size":{minRows:3,maxRows:6}},null,8,["modelValue"])])),_:1}),(0,l.Wm)(y,{"col-props":{span:24}},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{onClick:e.save,type:"primary"},{default:(0,l.w5)((()=>[p])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])),_:1},8,["loading"])])}var m=a(8518),f=a(9262),b=a(8468),y=a(4880),w=a(9810),g=a(7162),h=a(678),v=a(1109),W=(0,l.aZ)({name:"user-detail",components:{CUVue:m.Z,SfForm:f.Z,SfFormItem:b.Z,Breadcrumb:y.Z},setup(){const e=(0,l.iH)(!1),t=(0,l.iH)(""),a=(0,l.iH)({id:void 0,patientDescription:"",diagnosticStatus:1,rvsIdentificationResult:"",doctorAdvice:"",patient:{id:void 0,patientName:"",patientGender:1,patientAge:35,phoneNumber:"",pastHistory:"",userId:""},images:[]}),i=(0,l.iH)([]),o=(0,l.iH)(!1),r=(0,h.yj)(),n=()=>{o.value=!0,w.Z.getAll().then((e=>{i.value=e.map((e=>({label:e.name,value:e.id})))})).finally((()=>{o.value=!1})),g.Z.detail(r.params.id).then((e=>{a.value=e}))};n();const d=()=>{e.value=!0,g.Z.update({id:a.value.id,doctorAdvice:a.value.doctorAdvice}).then((()=>{v.Z.success("保存成功")})).finally((()=>{e.value=!1}))};return{loading:e,formData:a,searchPatient:t,modelList:i,modelListLoading:o,save:d}}}),k=a(89);const Z=(0,k.Z)(W,[["render",c],["__scopeId","data-v-b81ae1cc"]]);var C=Z}}]);